{"version":3,"sources":["webpack:///./src/assets/style.css?601d","webpack:///./src/helpers/consts.js","webpack:///./src/scenes/PreloadScene.js","webpack:///./src/entities/ScoreLabel.js","webpack:///./src/entities/BombSpawner.js","webpack:///./src/scenes/GameScene.js","webpack:///./src/index.js","webpack:///./src/assets/style.css"],"names":["PreloadScene","this","load","image","keys","sky","platform","star","bomb","spritesheet","dude","frameWidth","frameHeight","progressBar","add","graphics","progressBox","fillStyle","fillRect","width","cameras","main","height","loadingText","make","text","x","y","style","font","fill","setOrigin","percentText","assetText","on","value","setText","parseInt","clear","file","key","destroy","loadAssets","scene","start","Phaser","formatScore","score","ScoreLabel","updateScoreText","points","setScore","BombSpawner","bombKey","group","physics","playerX","create","setBounce","setCollideWorldBounds","setVelocity","GameScene","player","cursors","platforms","scoreLabel","stars","bombSpawner","bombsGroup","gameOver","createPlatforms","createPlayer","createStars","createScoreLabel","input","keyboard","createCursorKeys","collisionDefs","restart","left","isDown","setVelocityX","anims","play","right","up","body","touching","down","setVelocityY","collider","hitBomb","overlap","collectStar","pause","setTint","disableBody","countActive","children","iterate","child","enableBody","spawn","label","fontSize","existing","repeat","setXY","stepX","setBounceY","staticGroup","setScale","refreshBody","sprite","frames","generateFrameNumbers","end","frameRate","frame","config","type","default","arcade","gravity","___CSS_LOADER_EXPORT___","push","module","id"],"mappings":"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","file":"index.7abb39012cae6f51b20a.js","sourcesContent":["import api from \"!../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../../node_modules/css-loader/dist/cjs.js!./style.css\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","const keys = {\n  sky: 'sky',\n  platform: 'platform',\n  star: 'star',\n  bomb: 'bomb',\n  dude: 'dude',\n};\n\nexport default keys;\n","import Phaser from 'phaser';\nimport keys from '../helpers/consts';\n\nimport sky from '../assets/sky.png';\nimport platform from '../assets/platform.png';\nimport star from '../assets/star.png';\nimport bomb from '../assets/bomb.png';\nimport dude from '../assets/dude.png';\n\nexport default class PreloadScene extends Phaser.Scene {\n  constructor() {\n    super('PreloadScene');\n  }\n\n  loadAssets() {\n    this.load.image(keys.sky, sky);\n    this.load.image(keys.platform, platform);\n    this.load.image(keys.star, star);\n    this.load.image(keys.bomb, bomb);\n\n    this.load.spritesheet(\n      keys.dude, dude,\n      {\n        frameWidth: 32,\n        frameHeight: 48,\n      },\n    );\n  }\n\n  preload() {\n    const progressBar = this.add.graphics();\n    const progressBox = this.add.graphics();\n    progressBox.fillStyle(0x222222, 0.8);\n    progressBox.fillRect(240, 270, 320, 50);\n\n    const { width } = this.cameras.main;\n    const { height } = this.cameras.main;\n    const loadingText = this.make.text({\n      x: width / 2,\n      y: height / 2 - 50,\n      text: 'Loading...',\n      style: {\n        font: '20px monospace',\n        fill: '#ffffff',\n      },\n    });\n    loadingText.setOrigin(0.5, 0.5);\n\n    const percentText = this.make.text({\n      x: width / 2,\n      y: height / 2 - 5,\n      text: '0%',\n      style: {\n        font: '18px monospace',\n        fill: '#ffffff',\n      },\n    });\n    percentText.setOrigin(0.5, 0.5);\n\n    const assetText = this.make.text({\n      x: width / 2,\n      y: height / 2 + 50,\n      text: '',\n      style: {\n        font: '18px monospace',\n        fill: '#ffffff',\n      },\n    });\n\n    assetText.setOrigin(0.5, 0.5);\n\n    this.load.on('progress', (value) => {\n      percentText.setText(`${parseInt(value * 100, 10)}%`);\n      progressBar.clear();\n      progressBar.fillStyle(0xffffff, 1);\n      progressBar.fillRect(250, 280, 300 * value, 30);\n    });\n\n    this.load.on('fileprogress', (file) => {\n      assetText.setText(`Loading asset: ${file.key}`);\n    });\n\n    this.load.on('complete', () => {\n      progressBar.destroy();\n      progressBox.destroy();\n      loadingText.destroy();\n      percentText.destroy();\n      assetText.destroy();\n    });\n\n    this.loadAssets();\n  }\n\n  create() {\n    this.scene.start('GameScene');\n  }\n}\n","import Phaser from 'phaser';\n\nconst formatScore = (score) => `Score: ${score}`;\n\nexport default class ScoreLabel extends Phaser.GameObjects.Text {\n  constructor(scene, x, y, score, style) {\n    super(scene, x, y, formatScore(score), style);\n\n    this.score = score;\n  }\n\n  setScore(score) {\n    this.score = score;\n    this.updateScoreText();\n  }\n\n  add(points) {\n    this.setScore(this.score + points);\n  }\n\n  updateScoreText() {\n    this.setText(formatScore(this.score));\n  }\n}\n","import Phaser from 'phaser';\n\nexport default class BombSpawner {\n  constructor(scene, bombKey) {\n    this.scene = scene;\n    this.key = bombKey;\n\n    this.group = this.scene.physics.add.group();\n  }\n\n  spawn(playerX = 0) {\n    const x = (playerX < 400)\n      ? Phaser.Math.Between(400, 800)\n      : Phaser.Math.Between(0, 400);\n\n    const bomb = this.group.create(x, 16, this.key);\n    bomb.setBounce(1);\n    bomb.setCollideWorldBounds(true);\n    bomb.setVelocity(Phaser.Math.Between(-200, 200), 20);\n\n    return bomb;\n  }\n}\n","import Phaser from 'phaser';\nimport keys from '../helpers/consts';\nimport ScoreLabel from '../entities/ScoreLabel';\nimport BombSpawner from '../entities/BombSpawner';\n\nexport default class GameScene extends Phaser.Scene {\n  constructor() {\n    super('GameScene');\n  }\n\n  create() {\n    this.player = null;\n    this.cursors = null;\n    this.platforms = null;\n    this.scoreLabel = null;\n    this.stars = null;\n    this.bombSpawner = null;\n    this.bombsGroup = null;\n\n    this.gameOver = false;\n\n    this.add.image(400, 300, keys.sky);\n    this.platforms = this.createPlatforms();\n    this.player = this.createPlayer();\n    this.stars = this.createStars();\n    this.scoreLabel = this.createScoreLabel(16, 16, 0);\n    this.bombSpawner = new BombSpawner(this, keys.bomb);\n    this.bombsGroup = this.bombSpawner.group;\n    this.cursors = this.input.keyboard.createCursorKeys();\n    this.collisionDefs();\n\n    this.input.keyboard.on('keydown-SPACE', this.restart, this);\n  }\n\n  update() {\n    if (this.gameOver) {\n      return;\n    }\n\n    if (this.cursors.left.isDown) {\n      this.player.setVelocityX(-160);\n\n      this.player.anims.play('left', true);\n    } else if (this.cursors.right.isDown) {\n      this.player.setVelocityX(160);\n\n      this.player.anims.play('right', true);\n    } else {\n      this.player.setVelocityX(0);\n      this.player.anims.play('turn');\n    }\n\n    if (this.cursors.up.isDown && this.player.body.touching.down) {\n      this.player.setVelocityY(-330);\n    }\n  }\n\n  collisionDefs() {\n    this.physics.add.collider(this.player, this.platforms);\n    this.physics.add.collider(this.stars, this.platforms);\n    this.physics.add.collider(this.bombsGroup, this.platforms);\n\n    this.physics.add.collider(\n      this.player, this.bombsGroup, this.hitBomb, null, this,\n    );\n\n    this.physics.add.overlap(\n      this.player, this.stars, this.collectStar, null, this,\n    );\n  }\n\n  // eslint-disable-next-line no-unused-vars\n  hitBomb(player, bomb) {\n    this.physics.pause();\n\n    player.setTint(0xff0000);\n\n    player.anims.play('turn');\n\n    this.gameOver = true;\n  }\n\n  restart() {\n    if (this.gameOver) {\n      this.scene.start('PreloadScene');\n    }\n  }\n\n  collectStar(player, star) {\n    star.disableBody(true, true);\n    this.scoreLabel.add(10);\n\n    if (this.stars.countActive(true) === 0) {\n      //  A new batch of stars to collect\n      this.stars.children.iterate((child) => {\n        child.enableBody(true, child.x, 0, true, true);\n      });\n    }\n\n    this.bombSpawner.spawn(player.x);\n  }\n\n  createScoreLabel(x, y, score) {\n    const style = { fontSize: '32px', fill: '#000' };\n    const label = new ScoreLabel(this, x, y, score, style);\n\n    this.add.existing(label);\n\n    return label;\n  }\n\n  createStars() {\n    const stars = this.physics.add.group({\n      key: keys.star,\n      repeat: 11,\n      setXY: { x: 12, y: 0, stepX: 70 },\n    });\n\n    stars.children.iterate((child) => {\n      child.setBounceY(Phaser.Math.FloatBetween(0.4, 0.8));\n    });\n\n    return stars;\n  }\n\n  createPlatforms() {\n    const platforms = this.physics.add.staticGroup();\n\n    platforms.create(400, 568, keys.platform).setScale(2).refreshBody();\n\n    platforms.create(600, 400, keys.platform);\n    platforms.create(50, 250, keys.platform);\n    platforms.create(750, 220, keys.platform);\n\n    return platforms;\n  }\n\n  createPlayer() {\n    const player = this.physics.add.sprite(100, 450, keys.dude);\n    player.setBounce(0.2);\n    player.setCollideWorldBounds(true);\n\n    this.anims.create({\n      key: 'left',\n      frames: this.anims.generateFrameNumbers(keys.dude, { start: 0, end: 3 }),\n      frameRate: 10,\n      repeat: -1,\n    });\n\n    this.anims.create({\n      key: 'turn',\n      frames: [{ key: keys.dude, frame: 4 }],\n      frameRate: 20,\n    });\n\n    this.anims.create({\n      key: 'right',\n      frames: this.anims.generateFrameNumbers(keys.dude, { start: 5, end: 8 }),\n      frameRate: 10,\n      repeat: -1,\n    });\n\n    return player;\n  }\n}\n","import './assets/style.css';\nimport Phaser from 'phaser';\n\nimport PreloadScene from './scenes/PreloadScene';\nimport GameScene from './scenes/GameScene';\n\nconst config = {\n  type: Phaser.CANVAS,\n  width: 800,\n  height: 600,\n  physics: {\n    default: 'arcade',\n    arcade: {\n      // debug: true,\n      gravity: {\n        y: 300,\n      },\n    },\n  },\n  scene: [\n    PreloadScene,\n    GameScene,\n  ],\n};\n\nexport default new Phaser.Game(config);\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"/* @font-face {\\n  font-family: 'MyFont';\\n  src: url('./my-font.woff2') format('woff2'),\\n    url('./my-font.woff') format('woff');\\n  font-weight: 600;\\n  font-style: normal;\\n} */\\n\\nbody {\\n  /* font-family: 'MyFont'; */\\n  margin: 0;\\n  background: #333;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/assets/style.css\"],\"names\":[],\"mappings\":\"AAAA;;;;;;GAMG;;AAEH;EACE,2BAA2B;EAC3B,SAAS;EACT,gBAAgB;AAClB\",\"sourcesContent\":[\"/* @font-face {\\n  font-family: 'MyFont';\\n  src: url('./my-font.woff2') format('woff2'),\\n    url('./my-font.woff') format('woff');\\n  font-weight: 600;\\n  font-style: normal;\\n} */\\n\\nbody {\\n  /* font-family: 'MyFont'; */\\n  margin: 0;\\n  background: #333;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n"],"sourceRoot":""}